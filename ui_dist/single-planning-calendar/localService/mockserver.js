sap.ui.define(["sap/ui/core/util/MockServer","sap/ui/model/json/JSONModel","sap/base/util/UriParameters","sap/base/Log"],(e,t,r,o)=>{let a;const n="iot.singleplanningcalendar/";const s=`${n}localService/mockdata`;const i={init(i){const c=i||{};return new Promise((i,u)=>{const l=sap.ui.require.toUrl(`${n}manifest.json`);const p=new t(l);p.attachRequestCompleted(()=>{const t=new r(window.location.href);const u=sap.ui.require.toUrl(s);const l=p.getProperty("/sap.app/dataSources/mainService");const d=sap.ui.require.toUrl(n+l.settings.localUri);const f=l.uri&&new URI(l.uri).absoluteTo(sap.ui.require.toUrl(n)).toString();if(!a){a=new e({rootUri:f})}else{a.stop()}e.config({autoRespond:true,autoRespondAfter:c.delay||t.get("serverDelay")||500});a.simulate(d,{sMockdataBaseUrl:u,bGenerateMissingMockData:true});const g=a.getRequests();const m=function(e,t,r){r.response=function(r){r.respond(e,{"Content-Type":"text/plain;charset=utf-8"},t)}};if(c.metadataError||t.get("metadataError")){g.forEach(e=>{if(e.path.toString().indexOf("$metadata")>-1){m(500,"metadata Error",e)}})}const h=c.errorType||t.get("errorType");const q=h==="badRequest"?400:500;if(h){g.forEach(e=>{m(q,h,e)})}a.setRequests(g);a.start();o.info("Running the app with mock data");i()});p.attachRequestFailed(()=>{const e="Failed to load application manifest";o.error(e);u(new Error(e))})})},getMockServer(){return a}};return i});
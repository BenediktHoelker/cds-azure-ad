<mvc:View xmlns:layout="sap.suite.ui.commons.networkgraph.layout" controllerName="iot.planner.components.managecategories.controller.Graph" displayBlock="true"
    xmlns="sap.ui.table"
    xmlns:m="sap.m"
    xmlns:mvc="sap.ui.core.mvc">
    <m:Page title="{i18n>graph}">
        <TreeTable id="treeTable" selectionMode="Multi" rowSelectionChange="onSelect" showNoData="true" rows="{path: '/CategoriesCumulativeDurations', 
        sorter: {path: 'totalDuration', descending: true},
        parameters: {numberOfExpandedLevels: 0, arrayNames: ['children']}}" visibleRowCount="20" selectionBehavior="Row" enableBusyIndicator="true" rowActionCount="3" sort="onSort" rowsUpdated="onRowsUpdated">
            <extension>
                <m:Toolbar width="100%">
                    <m:Button icon="sap-icon://collapse" press="collapseAll"/>
                    <m:Button icon="sap-icon://expand" press="expand"/>
                    <m:SearchField search="onSearch"/>
                    <m:Label text="{i18n>dateFrom}:" width="5em" textAlign="End"/>
                    <m:DatePicker value="{path: 'viewModel>/dateFrom', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                    <m:Label text="{i18n>dateUntil}:" width="5em" textAlign="End"/>
                    <m:DatePicker value="{path: 'viewModel>/dateUntil', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                    <m:Button text="{i18n>refresh}" press="loadData"/>
                </m:Toolbar>
            </extension>
            <columns>
                <Column label="{i18n>title}">
                    <template>
                        <m:Text text="{title}"/>
                    </template>
                </Column>
                <Column label="{i18n>deepReference}">
                    <template>
                        <m:Text text="{deepReference}"/>
                    </template>
                </Column>
                <Column label="{i18n>relativeDuration}">
                    <template>
                        <m:ProgressIndicator showValue="true" state="None" />
                    </template>
                </Column>
                <Column label="{i18n>totalDuration}" hAlign="End">
                    <template>
                        <m:ObjectNumber number="{path: 'totalDuration', formatter: '.formatter.toFixed2'}" unit="{=${totalDuration} ? 'h' : ''}" textAlign="End"/>
                    </template>
                </Column>
                <Column label="{i18n>accumulatedDuration}" hAlign="End">
                    <template>
                        <m:ObjectNumber number="{path: 'accumulatedDuration', formatter: '.formatter.toFixed2'}" unit="{=${accumulatedDuration} ? 'h' : ''}" textAlign="End"/>
                    </template>
                </Column>
            </columns>
        </TreeTable>
    </m:Page>

</mvc:View>
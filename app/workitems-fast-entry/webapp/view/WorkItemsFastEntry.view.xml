<mvc:View xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:layout="sap.ui.layout"
	xmlns:form="sap.ui.layout.form"
	xmlns:f="sap.f"
	xmlns:c="iot.workitemsfastentry.control" controllerName="iot.workitemsfastentry.controller.WorkItemsFastEntry">
	<App>
		<Page>
			<customHeader>
				<f:ShellBar title="{i18n>title}"/>
			</customHeader>
			<content>
				<f:DynamicPage showFooter="true">
					<f:header>
						<f:DynamicPageHeader pinnable="true">
							<form:Form id="formWorkItem" editable="true">
								<form:layout>
									<form:ResponsiveGridLayout labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" columnsXL="3" columnsL="3" columnsM="2" singleContainerFullSize="false" />
								</form:layout>
								<form:formContainers>
									<form:FormContainer>
										<form:formElements>
											<form:FormElement label="{i18n>formInputTitle}">
												<form:fields>
													<Input id="titleForm" value="{/newWorkItem/title}"/>
												</form:fields>
											</form:FormElement>
											<form:FormElement label="{i18n>formInputHierarchy}">
												<form:fields>
													<Input id="hierarchySearchForm" value="{/newWorkItem/parentPath}" suggestionItems="{/MyCategories}" liveChange="onChangeHierarchy">
														<suggestionItems>
															<core:Item text="{path}" key="{ID}"/>
														</suggestionItems>
													</Input>
												</form:fields>
											</form:FormElement>
											<form:FormElement>
												<form:fields>
													<ScrollContainer height="12vw" vertical="true">
														<Tree mode="SingleSelectMaster" selectionChange="onSelectHierarchy" id="hierarchyTreeForm" items="{path: '/categories', parameters: {numberOfExpandedLevels: 5, arrayNames: ['children']}}">
															<StandardTreeItem title="{title}"/>
														</Tree>
													</ScrollContainer>
												</form:fields>
											</form:FormElement>
										</form:formElements>
									</form:FormContainer>
									<form:FormContainer>
										<form:formElements>
											<form:FormElement label="{i18n>formDatePickerDate}">
												<DatePicker id="date" value="{path: '/newWorkItem/activatedDate', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy'}}"/>
											</form:FormElement>
											<form:FormElement label="{i18n>formTimePickerActivatedAndCompletedDate}">
												<TimePicker value="{ path: '/newWorkItem/activatedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
												<TimePicker value="{ path: '/newWorkItem/completedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
											</form:FormElement>
											<form:FormElement label="{i18n>formComboBoxLocation}">
												<ComboBox id="selectLocation" items="{path: '/locations', templateShareable: false}">
													<items>
														<core:Item key="{title}" text="{title}"/>
													</items>
												</ComboBox>
											</form:FormElement>
										</form:formElements>
									</form:FormContainer>
								</form:formContainers>
							</form:Form>
							<Button text="{i18n>formButtonSubmit}" press=".addWorkItem" type="Emphasized"/>
						</f:DynamicPageHeader>
					</f:header>

					<f:content>
						<Table id="tableWorkItems" growing="true" growingScrollToLoad="true" mode="MultiSelect" fixedLayout="false" busy="{/tableBusy}" busyIndicatorDelay="0" items="{
								path: '/MyWorkItems',
								sorter: {
									path: 'completedDate',
									descending: false
								}
							}">
							<headerToolbar>
								<OverflowToolbar>
									<ToolbarSpacer/>
									<Button text="{i18n>tableButtonCommit}"/>
									<Button text="{i18n>tableButtonDelete}"/>
									<Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed"/>
									<Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed"/>
									<SearchField liveChange=".onSearch" width="20rem"/>
								</OverflowToolbar>
							</headerToolbar>

							<columns>
								<Column>
									<Text text="{i18n>tableColumnTitle}"/>
								</Column>
								<Column>
									<Text text="{i18n>tableColumnDate}"/>
								</Column>
								<Column>
									<Text text="{i18n>tableColumnActivatedDate}"/>
								</Column>
								<Column>
									<Text text="{i18n>tableColumnCompletedDate}"/>
								</Column>
								<Column>
									<Text text="{i18n>tableColumnDuration}" wrapping="false"/>
								</Column>
								<Column>
									<Text text="{i18n>tableColumnHierarchy}"/>
								</Column>
								<Column demandPopin="true" popinDisplay="Inline" minScreenWidth="Desktop">
									<Text text="{i18n>tableColumnLocation}"/>
								</Column>
								<Column width="3vw">
									<Text text="{i18n>tableColumnStatus}"/>
								</Column>
							</columns>

							<items>
								<ColumnListItem press=".onPress">
									<cells>
										<TextArea value="{title}" rows="1" growing="true" growingMaxLines="6" width="12vw"/>
										<DatePicker value="{ path: 'activatedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy'} }"/>
										<TimePicker value="{ path: 'activatedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
										<TimePicker value="{ path: 'completedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
										<!-- <TimePicker value="{ path: 'duration' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/> -->
										<Text text="{path: 'duration', formatter: '.formatter.duration'}" />
										<!-- <VBox alignItems="Center"> -->
										<Input id="hierarchySearchTable" value="{parentPath}" suggestionItems="{path: '/MyCategories', templateShareable: false}" liveChange="onChangeHierarchy" width="24vw">
											<suggestionItems>
												<core:Item text="{path}" key="{ID}"/>
											</suggestionItems>
										</Input>
										<ComboBox id="selectLocationTable" items="{path: '/locations', templateShareable: false}" selectedKey="{location}">
											<items>
												<core:Item key="{title}" text="{title}"/>
											</items>
										</ComboBox>
										<c:If condition="{= ${state} === 'completed'}">
											<ObjectStatus class="sapUiTinyMargin" icon="sap-icon://sys-enter-2" state="Success"/>
											<ObjectStatus class="sapUiTinyMargin" icon="sap-icon://alert" state="Warning"/>
										</c:If>
									</cells>
								</ColumnListItem>
							</items>

						</Table>
					</f:content>
				</f:DynamicPage>
			</content>
		</Page>
	</App>
</mvc:View>

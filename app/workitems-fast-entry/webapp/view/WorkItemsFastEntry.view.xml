<mvc:View xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core"
	xmlns="sap.m"
	xmlns:layout="sap.ui.layout"
	xmlns:form="sap.ui.layout.form"
	xmlns:f="sap.f"
	xmlns:c="iot.workitemsfastentry.control" controllerName="iot.workitemsfastentry.controller.WorkItemsFastEntry">
	<Shell id="shell" appWidthLimited="false">
		<App busy="{/busy}" busyIndicatorDelay="0">
			<Page>
				<customHeader>
					<f:ShellBar title="{i18n>title}"/>
				</customHeader>
				<content>
					<f:DynamicPage showFooter="true">

						<f:header>
							<f:DynamicPageHeader pinnable="true">
								<form:Form id="formWorkItem" editable="true">
									<form:layout>
										<form:ResponsiveGridLayout labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12" adjustLabelSpan="false" columnsXL="3" columnsL="3" columnsM="2" singleContainerFullSize="false" />
									</form:layout>
									<form:formContainers>
										<form:FormContainer>
											<form:formElements>
												<form:FormElement label="{i18n>formTextAreaDescription}">
													<TextArea id="textAreaDescription" rows="1" growing="true" growingMaxLines="6" width="100%"/>
												</form:FormElement>
												<form:FormElement label="{i18n>formInputHierarchy}">
													<form:fields>
														<Input id="hierarchySearchForm" value="{/newWorkItem/parentPath}" suggestionItems="{/categoriesFlat}" liveChange="onChangeHierarchy">
															<suggestionItems>
																<core:Item text="{path}" key="{ID}"/>
															</suggestionItems>
														</Input>
													</form:fields>
												</form:FormElement>
												<form:FormElement>
													<form:fields>
														<c:If condition="{= ${/showHierarchyTreeForm} === true}">
															<Popover id="popoverHierarchyTree" showHeader="false" contentWidth="30.8vw" placement="Bottom">
																<Tree mode="SingleSelectMaster" selectionChange="onSelectHierarchy" id="hierarchyTreeForm" items="{path: '/categoriesNested', parameters: {numberOfExpandedLevels: 5, arrayNames: ['children']}}">
																	<StandardTreeItem title="{title}"/>
																</Tree>
															</Popover>
															<Tree visible="false"/>
														</c:If>
													</form:fields>
												</form:FormElement>
											</form:formElements>
										</form:FormContainer>
										<form:FormContainer>
											<form:formElements>
												<form:FormElement label="{i18n>formInputTags}">
													<Input id="inputTags"/>
												</form:FormElement>
												<!-- <form:FormElement label="{i18n>formInputTags}">
													<form:fields>
														<MultiInput tokens="{path: 'tags', templateShareable: false}" suggestionItems="{
															path: 'OData>/Tags',
															templateShareable: false,
															sorter: { path: 'title' }
														}" showValueHelp="false" tokenUpdate="onUpdateTags">
															<suggestionItems>
																<core:Item key="{OData>title}" text="{OData>title}"/>
															</suggestionItems>
															<tokens>
																<Token key="{tag_title}" text="{tag_title}" delete="onDeleteToken"/>
															</tokens>
														</MultiInput>
													</form:fields>
												</form:FormElement> -->
											</form:formElements>
										</form:FormContainer>
										<form:FormContainer>
											<form:formElements>
												<form:FormElement label="{i18n>formDatePickerDate}">
													<DatePicker id="date" value="{ path: '/newWorkItem/date', type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy'} }" change=".onChangeDate"/>
												</form:FormElement>
												<form:FormElement label="{i18n>formTimePickerActivatedAndCompletedDate}">
													<TimePicker value="{ path: '/newWorkItem/activatedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
													<TimePicker value="{ path: '/newWorkItem/completedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
												</form:FormElement>
												<form:FormElement label="{i18n>formComboBoxLocation}">
													<ComboBox id="selectLocation" items="{/locations}">
														<items>
															<core:Item key="{title}" text="{title}"/>
														</items>
													</ComboBox>
												</form:FormElement>
											</form:formElements>
										</form:FormContainer>
									</form:formContainers>
								</form:Form>
								<Button text="{i18n>formButtonSubmit}" press=".onPressSubmitWorkItem" type="Emphasized"/>
							</f:DynamicPageHeader>
						</f:header>

						<f:content>
							<Table id="tableWorkItems" growing="true" growingScrollToLoad="true" width="auto" mode="MultiSelect" fixedLayout="false" items="{
								path: '/workItems',
								sorter: {
									path: 'completedDate',
									descending: false
								}
							}">
								<headerToolbar>
									<OverflowToolbar>
										<ToolbarSpacer/>
										<Button text="{i18n>tableButtonCommit}"/>
										<Button text="{i18n>tableButtonDelete}"/>
										<Button tooltip="Sort" icon="sap-icon://sort" press="handleSortButtonPressed"/>
										<Button tooltip="Filter" icon="sap-icon://filter" press="handleFilterButtonPressed"/>
										<SearchField liveChange=".onSearch" width="20rem"/>
									</OverflowToolbar>
								</headerToolbar>

								<columns>
									<Column>
										<Text text="{i18n>tableColumnDate}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnActivatedDate}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnCompletedDate}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnDuration}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnHierarchy}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnTags}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnLocation}"/>
									</Column>
									<Column>
										<Text text="{i18n>tableColumnDescription}"/>
									</Column>
									<Column width="3vw">
										<Text text="{i18n>tableColumnStatus}"/>
									</Column>
								</columns>

								<items>
									<ColumnListItem press=".onPress">
										<cells>
											<DatePicker value="{ path: 'date' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'dd.MM.yyyy'} }"/>
											<TimePicker value="{ path: 'activatedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
											<TimePicker value="{ path: 'completedDate' , type: 'sap.ui.model.type.Date', formatOptions: {pattern: 'HH:mm'} }"/>
											<Input value="{duration}" editable="false"/>
											<!-- <VBox alignItems="Center"> -->
											<Input id="hierarchySearchTable" value="{parentPath}" suggestionItems="{/categoriesFlat}" liveChange="onChangeHierarchy" width="24vw">
												<suggestionItems>
													<core:Item text="{path}" key="{ID}"/>
												</suggestionItems>
											</Input>
											<!-- <c:If condition="{= ${/showHierarchyTreeTable} === true}">
													<Tree mode="SingleSelectMaster" selectionChange="onSelectHierarchy" id="hierarchyTreeTable" items="{path: '/categoriesNested', parameters: {numberOfExpandedLevels: 5, arrayNames: ['children']}}" class="sapUiTinyMarginBegin" width="24vw">
														<StandardTreeItem title="{title}"/>
													</Tree>
													<Tree visible="false"/>
												</c:If> -->
											<!-- </VBox> -->
											<TextArea value="" rows="1" growing="true" growingMaxLines="6" width="6vw"/>
											<ComboBox id="selectLocationTable" items="{/locations}" selectedKey="{location}">
												<items>
													<core:Item key="{title}" text="{title}"/>
												</items>
											</ComboBox>
											<TextArea value="{description}" rows="1" growing="true" growingMaxLines="6" width="6vw"/>
											<c:If condition="{= ${state} === 'completed'}">
												<ObjectStatus class="sapUiTinyMargin" icon="sap-icon://sys-enter-2" state="Success"/>
												<ObjectStatus class="sapUiTinyMargin" icon="sap-icon://alert" state="Warning"/>
											</c:If>
										</cells>
									</ColumnListItem>
								</items>

							</Table>
						</f:content>
					</f:DynamicPage>
				</content>
			</Page>
		</App>
	</Shell>
</mvc:View>

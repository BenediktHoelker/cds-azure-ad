<mvc:View xmlns:layout="sap.suite.ui.commons.networkgraph.layout" controllerName="iot.planner.assignuserstocategories.controller.Graph" displayBlock="true"
    xmlns="sap.suite.ui.commons.networkgraph"
    xmlns:m="sap.m"
    xmlns:t="sap.ui.table"
    xmlns:mvc="sap.ui.core.mvc">

    <m:Page title="{i18n>graph}">

        <t:TreeTable id="treeTable" selectionMode="Multi" rowSelectionChange="onSelect" showNoData="true" rows="{path: '/CategoriesCumulativeDurations', 
        sorter: {path: 'totalDuration', descending: true},
        parameters: {numberOfExpandedLevels: 0, arrayNames: ['children']}}" visibleRowCount="20" selectionBehavior="Row" enableBusyIndicator="true" rowActionCount="3" sort="onSort" rowsUpdated="onRowsUpdated">
            <t:extension>
                <m:Toolbar width="100%">
                    <m:Button icon="sap-icon://collapse" press="collapseAll"/>
                    <m:Button icon="sap-icon://expand" press="expand"/>
                    <m:SearchField search="onSearch"/>
                    <!-- <m:Text text="{i18>dateFrom}"/> -->

                    <m:Label text="{i18n>dateFrom}:" width="5em" textAlign="End"/>
                    <m:DatePicker value="{path: 'viewModel>/dateFrom', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                    <m:Label text="{i18n>dateUntil}:" width="5em" textAlign="End"/>
                    <m:DatePicker value="{path: 'viewModel>/dateUntil', type: 'sap.ui.model.type.Date', formatOptions: {style: 'medium'}}"/>
                    <m:Button text="{i18n>refresh}" press="loadData"/>
                </m:Toolbar>
            </t:extension>
            <t:columns>
                <t:Column label="{i18n>title}">
                    <t:template>
                        <m:Text text="{title}"/>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>catNumber}">
                    <t:template>
                        <m:Text text="{catNumber}"/>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>relativeDuration}">
                    <t:template>
                        <m:ProgressIndicator showValue="true" state="None" />
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>totalDuration}" hAlign="End">
                    <t:template>
                        <m:ObjectNumber number="{path: 'totalDuration', formatter: '.formatter.toFixed2'}" unit="{=${totalDuration} ? 'h' : ''}" textAlign="End"/>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>accumulatedDuration}" hAlign="End">
                    <t:template>
                        <m:ObjectNumber number="{path: 'accumulatedDuration', formatter: '.formatter.toFixed2'}" unit="{=${accumulatedDuration} ? 'h' : ''}" textAlign="End"/>
                    </t:template>
                </t:Column>
            </t:columns>
        </t:TreeTable>
    </m:Page>

</mvc:View>
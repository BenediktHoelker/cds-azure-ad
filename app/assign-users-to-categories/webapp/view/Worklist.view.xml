<mvc:View controllerName="iot.planner.assignuserstocategories.controller.Worklist"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:t="sap.ui.table"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:semantic="sap.f.semantic">

    <Page title="{i18n>worklistTitle}">

        <t:TreeTable id="treeTable" selectionMode="Multi" rowSelectionChange="onSelect" showNoData="true" rows="{path: '/Categories', parameters: {numberOfExpandedLevels: 2, expand: 'members,tags,members/user'}}" visibleRowCount="20" selectionBehavior="Row" enableBusyIndicator="true" rowActionCount="3" sort="onSort">

            <t:extension>
                <OverflowToolbar >
                    <SearchField search="onSearch" width="100%" />
                </OverflowToolbar>
            </t:extension>
            <t:columns>
                <t:Column label="{i18n>title}" width="15%">
                    <t:template>
                        <ObjectIdentifier text="{title}"/>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>description}" width="15%">
                    <t:template>
                        <Text text="{description}"/>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>tags}" width="20%">
                    <t:template>
                        <MultiInput tokens="{path: 'tags', templateShareable: false}" suggestionItems="{
                                    path: '/Tags',
                                    templateShareable: false,
                                    sorter: { path: 'title' }
                                }" showValueHelp="false" tokenUpdate="onTagsUpdate" change="onCreateToken">
                            <suggestionItems>
                                <core:Item key="{title}" text="{title}"/>
                            </suggestionItems>
                            <tokens>
                                <Token key="{tag_title}" text="{tag_title}" delete="onDeleteToken"/>
                            </tokens>
                        </MultiInput>
                    </t:template>
                </t:Column>
                <t:Column label="{i18n>members}" width="30%">
                    <t:template>
                        <MultiInput tokens="{path: 'members', templateShareable: false}" suggestionItems="{
                                    path: '/Users',
                                    templateShareable: false,
                                    sorter: { path: 'displayName' }
                                }" showValueHelp="false" tokenUpdate="onUpdateUsers2Categories">
                            <suggestionItems>
                                <core:Item key="{userPrincipalName}" text="{displayName}"/>
                            </suggestionItems>
                            <tokens >
                                <Token key="{user_userPrincipalName}" text="{user/displayName}" delete="onDeleteToken"/>
                            </tokens>
                        </MultiInput>
                    </t:template>
                </t:Column>
            </t:columns>
        </t:TreeTable>
        <!-- <footer>
            <Bar>
                <contentRight>
                    <Button type="Emphasized" text="Submit" press="onPressSubmit"/>
                </contentRight>
            </Bar>
        </footer> -->
    </Page>
</mvc:View>
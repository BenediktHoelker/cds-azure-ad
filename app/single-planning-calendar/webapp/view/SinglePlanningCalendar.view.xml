<mvc:View controllerName="iot.singleplanningcalendar.controller.SinglePlanningCalendar"
	xmlns="sap.m"
	xmlns:unified="sap.ui.unified"
	xmlns:form="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
	xmlns:l="sap.ui.layout"
	xmlns:smartfield="sap.ui.comp.smartfield"
	xmlns:mvc="sap.ui.core.mvc" displayBlock="true">
	<Shell id="shell">
		<App id="app" busy="{/busy}" busyIndicatorDelay="0">
			<pages>
				<Page showHeader="false">
					<SinglePlanningCalendar id="SPCalendar" appointments="{/appointments}" appointmentSelect="onPressAppointment" appointmentCreate="onCreateAppointment" appointmentResize="onAppointmentResize" appointmentDrop="onAppointmentResize" startDateChange="onStartDateChange" viewChange="onChangeView" cellPress="onCreateAppointment" startHour="7" endHour="20" fullDay="false" enableAppointmentsCreate="true" enableAppointmentsResize="true" enableAppointmentsDragAndDrop="true">
						<actions>
							<Button id="createAppointment" text="{i18n>createAppointment.button.text}" press="onCreateAppointment" tooltip="{i18n>createAppointment.button.tooltip}" />
							<Button id="displayLegend" text="{i18n>displayLegend.button.text}" press="onDisplayLegend" tooltip="{i18n>displayLegend.button.tooltip}" />
						</actions>
						<appointments>
							<unified:CalendarAppointment startDate="{activatedDate}" endDate="{completedDate}" title="{ticket} {title}" text="{customer_friendlyID} {project_friendlyID}" type="{parts: ['type', 'project_friendlyID', 'status'], formatter: '.formatter.getDisplayType'}" icon="{path: 'customer_friendlyID', formatter: '.formatter.getIconURL'}" tentative="{= !${confirmed}}"/>
						</appointments>
						<dependents>
							<Dialog id="createItemDialog" busy="{/dialogBusy}" afterClose="onAfterCloseDialog">
								<customHeader>
									<Bar>
										<contentLeft>
											<Title text="{/createItemDialogTitle} {= !${confirmed} ? ' - Draft' : ''}"/>
										</contentLeft>
										<contentRight>
											<Button press="onPressResetAppointment" text="{i18n>resetEntry.button.text}" tooltip="{i18n>resetEntry.button.tooltip}" enabled="{= !!${customer_friendlyID} &amp;&amp; !!${project_friendlyID}}"/>
											<Button press="onPressDeleteAppointment" text="{i18n>deleteEntry.button.text}" tooltip="{i18n>deleteEntry.button.tooltip}"/>
										</contentRight>
									</Bar>
								</customHeader>
								<form:SimpleForm editable="true" layout="ResponsiveGridLayout">
									<Label text="{i18n>WorkItems.title}" />
									<Input value="{title}"/>
									<Label text="{i18n>WorkItems.customer}"/>
									<ComboBox selectedKey="{customer_friendlyID}" items="{/customers}" change="onChangeSelectedCustomer">
										<items>
											<core:Item text="{name}" key="{friendlyID}"/>
										</items>
									</ComboBox>
									<Label text="{i18n>WorkItems.project}"/>
									<Select id="projectSelect" selectedKey="{project_friendlyID}" items="{customer/projects}" change="onChangeSelectedProject">
										<items>
											<core:Item text="{title}" key="{friendlyID}"/>
										</items>
									</Select>
									<Label text="{i18n>WorkItems.ticket}"/>
									<Input value="{ticket}"/>
									<Label text="{i18n>WorkItems.activatedDate}"/>
									<DateTimePicker value="{path:'activatedDate', type:'sap.ui.model.type.DateTime', formatOptions: {style: 'short'}}" minutesStep="15"/>
									<Label text="{i18n>WorkItems.completedDate}"/>
									<DateTimePicker value="{path: 'completedDate', type:'sap.ui.model.type.DateTime', formatOptions: {style: 'short'}}" minutesStep="15"/>
								</form:SimpleForm>
								<buttons>
									<Button id="submitButton" text="{i18n>OK}" press="onSubmitEntry" enabled="{= !!${customer_friendlyID} &amp;&amp; !!${project_friendlyID}}" type="Emphasized"/>
									<Button text="{i18n>close}" press="onCloseDialog" />
								</buttons>
							</Dialog>
							<Dialog id="legendDialog" title="{i18n>legend.title}">
								<PlanningCalendarLegend id="singlePlanningCalendarLegend" items="{path : '/legendItems', templateShareable: true}" class="sapUiSmallMarginTop">
									<items>
										<unified:CalendarLegendItem text="{text}" type="{type}" />
									</items>
								</PlanningCalendarLegend>
								<buttons>
									<Button text="{i18n>close}" press="onCloseDialog" />
								</buttons>
							</Dialog>
						</dependents>
						<views>
							<SinglePlanningCalendarDayView key="Day" id="dayView" title="Day" />
							<SinglePlanningCalendarWorkWeekView key="WorkWeek" title="Work Week" />
							<SinglePlanningCalendarWeekView key="Week" title="Week" />
							<SinglePlanningCalendarMonthView key="Month" id="monthView" title="Month" />
						</views>
					</SinglePlanningCalendar>
				</Page>
			</pages>
		</App>
	</Shell>
</mvc:View>